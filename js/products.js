let productsList = [
    {
        "name": "Wall Decors",
        "description": "Adorable jungle animal wall decor for boys/girls bedroom, kids bedroom, nursery.",
        "category": "Nursery and Decoration",
        "price": 599,
        "picture": "images/products/wall_decors.png"
    },
    {
        "name": "Clothes Storage",
        "description": "Suitable for closets,bedrooms,nurseries,playrooms, entryways and more.As a kids or baby dresser is a good choice.",
        "category": "Nursery and Decoration",
        "price": 2700,
        "picture": "images/products/clothes_storage.png"
    },
    {
        "name": "Baby Shoe Rack",
        "description": "The Light Pink kids shoe rack which is very suitable for placing girls' shoes, boys' shoes, kid shoes, baby shoes, just right for the height of the child. They can easily put on their shoes and go out, or they can sit by and change shoes.",
        "category": "Nursery and Decoration",
        "price": 499,
        "picture": "images/products/baby_shoe_rack.png"
    },
    {
        "name": "Crib Mobil",
        "description": "A toy that hangs over a crib and entertains your baby.",
        "category": "Nursery and Decoration",
        "price": 1500,
        "picture": "images/products/crib_mobil.png"
    },
    {
        "name": "White Wooden Crib",
        "description": "Made of wood and includes a soft mattress for your baby's safe and comfy slumber.",
        "category": "Nursery and Decoration",
        "price": 5580,
        "picture": "images/products/white_wooden_crib.png"
    },
    {
        "name": "Soft Head Pillow",
        "description": "Made of cotton and a soft cloth for your baby's comfy slumber.",
        "category": "Nursery and Decoration",
        "price": 545,
        "picture": "images/products/soft_head_pillow.png"
    },
    {
        "name": "Wooden High Chair",
        "description": "A fantastic way to feed your kid safely.",
        "category": "Nursery and Decoration",
        "price": 1700,
        "picture": "images/products/wooden_high_chair.png"
    },
    {
        "name": "Night Light",
        "description": "To create a more ambient environment for your baby’s room.",
        "category": "Nursery and Decoration",
        "price": 795,
        "picture": "images/products/night_light.png"
    },
    {
        "name": "Printed Swimwear",
        "description": "UPF 50+ protection blocks up to 98% of the sun’s harmful rays and superior Chlorine Resistant Creola Highclo Spandex.",
        "category": "Clothes and Diapers",
        "price": 699,
        "picture": "images/products/printed_swimwear.png"
    },
    {
        "name": "Cloth Diaper",
        "description": "Avoid the infamous diaper explosions! Esembly diapers are made of 2 leak-proof parts. The Esembly organic cotton Inner (sold separately) provides the absorbency and the Esembly Outer layers over the Inner for waterproofing and containment. Together they make a complete, blowout-proof cloth diaper.",
        "category": "Clothes and Diapers",
        "price": 230,
        "picture": "images/products/cloth_diaper.png"
    },
    {
        "name": "Cloth Diaper Set",
        "description": "This useful diaper set contains all of the cloth diaper essentials you need to get started.",
        "category": "Clothes and Diapers",
        "price": 799,
        "picture": "images/products/cloth_diaper_set.png"
    },
    {
        "name": "Chino Short",
        "description": "Styled with a pull-on elastic waist, drawstring, and side slant and back patch pockets.",
        "category": "Clothes and Diapers",
        "price": 520,
        "picture": "images/products/chino_short.png"
    },
    {
        "name": "Blue Walking Shoes",
        "description": "Helps your child to walk comfortably.",
        "category": "Clothes and Diapers",
        "price": 490,
        "picture": "images/products/blue_walking_shoes.png"
    },
    {
        "name": "Bear Onesie",
        "description": "Allows your infant to feel comfortable in a shirt while also preventing the shirt from riding up and cloth diapers from slipping down throughout the day.",
        "category": "Clothes and Diapers",
        "price": 899,
        "picture": "images/products/bear_onesie.png"
    },
    {
        "name": "Blue Overalls",
        "description": "A must-have clothes in every child's wardrobe as they are incredibly comfortable.",
        "category": "Clothes and Diapers",
        "price": 950,
        "picture": "images/products/blue_overalls.png"
    },
    {
        "name": "Pink Overalls",
        "description": "A must-have clothes in every child's wardrobe as they are incredibly comfortable.",
        "category": "Clothes and Diapers",
        "price": 950,
        "picture": "images/products/pink_overalls.png"
    },
    {
        "name": "Pampers Baby-Dry",
        "description": "Helps babies sleep through the night and protects them from irritation.",
        "category": "Clothes and Diapers",
        "price": 1200,
        "picture": "images/products/pampers_baby_dry.png"
    },
    {
        "name": "Rubber Ducky",
        "description": "These cute duckies are smooth and soft. When squeezing it, it will make a sound.Your kids Never Stop Playing With Them!",
        "category": "Bath and Potty",
        "price": 180,
        "picture": "images/products/rubber_duck.png"
    },
    {
        "name": "Hooded Bathrobe",
        "description": "There’s nothing cuter than a baby in a bathrobe. Perfect for snuggling after bath time, or a day at the beach, this super soft and absorbent cotton bathrobe is ideal for wrapping a baby in comfort.",
        "category": "Bath and Potty",
        "price": 470,
        "picture": "images/products/hooded_bathrobe.png"
    },
    {
        "name": "Bath Sponge",
        "description": "These baby bath sponge is absorbent and soft, which can work well with shower gel and create abundant foams, easy to make your skin clean and smooth with comfortable touch; The baby bath shower sponge is soft and comfortable to use.",
        "category": "Bath and Potty",
        "price": 159,
        "picture": "images/products/bath_sponge.png"
    },
    {
        "name": "Potty Trainer",
        "description": "The Potty Trainer is the perfect training aid for your little one to master potty training.",
        "category": "Bath and Potty",
        "price": 1399,
        "picture": "images/products/potty_trainer.png"
    },
    {
        "name": "Bedtime Shampoo",
        "description": "Baby bedtime shampoo with soothing NaturalCalm™ essences, to gently cleanse baby's delicate hair.",
        "category": "Bath and Potty",
        "price": 699,
        "picture": "images/products/bedtime_shampoo.png"
    },
    {
        "name": "Baby Lotion",
        "description": "Made with coconut oil, keeps delicate skin soft, smooth, and feeling healthy. Nourish baby's skin for 24 hours.",
        "category": "Bath and Potty",
        "price": 899,
        "picture": "images/products/baby_lotion.png"
    },
    {
        "name": "Baby Soft Towels",
        "description": "Made from soft cotton that's highly water absorbent, so you can dry your child quickly and comfortably.",
        "category": "Bath and Potty",
        "price": 760,
        "picture": "images/products/baby_soft_towels.png"
    },
    {
        "name": "Baby Bath Tub",
        "description": "For a safe and fun bath time experience with your little one.",
        "category": "Bath and Potty",
        "price": 1499,
        "picture": "images/products/baby_bath_tub.png"
    }
];

let length = productsList.length;

function showProducts() {
    let randomProducts = [];

    while (randomProducts.length < 8) {
        let i = parseInt(Math.random() * length);
        const found = randomProducts.some(value => value.name === productsList[i].name);

        if (randomProducts.length === 0 || !found) {
            randomProducts.push(productsList[i]);
        }
    }

    for (let i = 0; i < randomProducts.length; i++) {
        if (i % 2 === 0) {
            document.getElementById("mostPopular").innerHTML += `
            <div class="card m-2" style="width: 18rem; height: 100%">
                <img src="${randomProducts[i].picture}" class="card-img-top"height="280" alt="product"/>
                <div class="card-body p-2">
                    <h4 class="card-title">${randomProducts[i].name}</h4>
                    <h6 class="card-text">Price: P<span class="text-success">${randomProducts[i].price}</span></h6>
                    <button class="btn btn-outline-info shopBtn" type="button" value="${randomProducts[i].name}">Shop now</button>
                </div>
            </div>`;
        }
        else {
            document.getElementById("recentProducts").innerHTML += `
            <div class="card m-2" style="width: 18rem; height: 100%">
                <img src="${randomProducts[i].picture}" class="card-img-top"height="280" alt="product"/>
                <div class="card-body p-2">
                    <h4 class="card-title">${randomProducts[i].name}</h4>
                    <h6 class="card-text">Price: P<span class="text-success">${randomProducts[i].price}</span></h6>
                    <button class="btn btn-outline-info shopBtn" type="button" value="${randomProducts[i].name}">Shop now</button>
                </div>
            </div>`;
        }
    }

    shopBtnValue();
}

let activeNav = '';

function getActiveNav() {
    let nursery = document.querySelector('#nursery');
    let clothes = document.querySelector('#clothes');
    let bath = document.querySelector('#bath');

    if (nursery.classList.contains("active")) {
        activeNav = nursery.id;
    }
    else if (clothes.classList.contains("active")) {
        activeNav = clothes.id;
    }
    else {
        activeNav = bath.id;
    }

    // nursery
    nursery.addEventListener('click', function () {
        // Remove the active nav
        removeSpecificClass("#clothes, #bath", "active");

        // Make active by adding active class
        document.querySelector('#nursery').className += ' active';
        activeNav = nursery.id;
        showCategoryProducts();
    });

    // clothes
    clothes.addEventListener('click', function () {
        // Remove the active nav
        removeSpecificClass("#nursery, #bath", "active");

        // Make active by adding active class
        document.querySelector('#clothes').className += ' active';
        activeNav = clothes.id;
        showCategoryProducts();
    });

    // bath
    bath.addEventListener('click', function () {
        // Remove the active nav
        removeSpecificClass("#clothes, #nursery", "active");

        // Make active by adding active class
        document.querySelector('#bath').className += ' active';
        activeNav = bath.id;
        showCategoryProducts();
    });
}

/**
 * Removes specific classes with specified value to be removed
 * @param {string} selector Multiple or single class(es) or id(s) to select. For removing single class or id (".class" or "#class") otherwise, (".classA, .classB") or ("#classA, #classB")
 * @param {string} value The value to remove
 */
function removeSpecificClass(selector, value) {
    document.querySelectorAll(selector).forEach(function (element) {
        element.classList.remove(value);
    })
}

function showCategoryProducts() {
    let category = " ";

    switch (activeNav) {
        case "nursery":
            category = "Nursery and Decoration";
            break;
        case "clothes":
            category = "Clothes and Diapers";
            break;
        case "bath":
            category = "Bath and Potty";
            break;
    }

    let productsContainer = document.getElementById("currentCategory");

    if (productsContainer.hasChildNodes()) {
        productsContainer.textContent = '';
    }

    for (let i = 0; i < length; i++) {
        if (productsList[i].category === category) {
            document.getElementById("currentCategory").innerHTML += `
            <div class="card m-2" style="width: 18rem; height: 100%;">
                <img src="${productsList[i].picture}" class="card-img-top" height="280" alt="product"/>
                <div class="card-body p-2">
                    <h4 class="card-title">${productsList[i].name}</h4>
                    <h6 class="card-text">Price: P<span class="text-success">${productsList[i].price}</span></h6>
                    <button class="btn btn-outline-info shopBtn" type="button" value="${productsList[i].name}">Shop now</button>
                </div>
            </div>`;
        }
    }

    shopBtnValue();
}

function shopBtnValue() {
    let shopBtn = document.querySelectorAll('.shopBtn');
    let length = shopBtn.length;

    for (let i = 0; i < length; i++) {
        shopBtn[i].addEventListener('click', function (event) {
            sessionStorage.setItem('product', this.value);
            location.href = "per_product.php";
        });
    }
}


